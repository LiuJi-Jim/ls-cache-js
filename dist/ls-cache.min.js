(function(){function t(){if(l&&"interactive"===l.readyState)return l;for(var t=document.head.getElementsByTagName("script"),r=t.length-1;r>=0;--r)if("interactive"===t[r].readyState)return r(l=t[r])}function r(){return document.currentScript?document.currentScript:s?s:t()}function e(t){if(!f[t]){if(f[t]=!0,window.localStorage){var r=(u.lsPrefix||"")+t;if(localStorage[r])try{var e=JSON.parse(localStorage[r]);if(e.req instanceof Array&&"string"==typeof e.fn){var n=e.req,a=Function("return "+e.fn)();return i(n,a,t),void 0}}catch(o){}}var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src=t,s=c,document.head.appendChild(c),s=null}}function n(t,r,e){if(window.localStorage){var n=(u.lsPrefix||"")+e;try{window.localStorage[n]=JSON.stringify({req:t,fn:""+r})}catch(i){}}}function i(t,r,i){o.when(t,function(){for(var e=[],a=0,f=t.length;f>a;++a)e.push(c[t[a]]);var s=r.apply(window,e);i&&(n(t,r,i),c[i]=s,o.fire(i))});for(var a=0,f=t.length;f>a;++a)e(t[a])}var a=function(){var t=1,r=function(){this.map={},this.rmap={},this.fired={}},e=Array.prototype.indexOf||function(t){for(var r=0,e=this.length;e>r;++r)if(this[r]===t)return r;return-1},n=function(t,r){setTimeout(function(){t.call(r)},0)};return r.prototype={when:function(r,e,i){var a=this.map,o=this.rmap,f=this.fired;if("string"==typeof r&&(r=[r]),0===r.length)return n(e,i||window);var c=(t++).toString(36);a[c]={waiting:r.slice(0),callback:e,thisObj:i||window};for(var s=0,l=r.length;l>s;++s){var u=r[s],h=o[u]||(o[u]=[]);h.push(c),f[u]&&this.fire(u)}return this},fire:function(t){if(!t)return this;var r=(this.map,this.rmap),e=this.fired;"string"==typeof t&&(t=[t]);for(var n=0,i=t.length;i>n;++n){var a=t[n];e[a]=!0,void 0!==r[a]&&(this._release(a,r[a]),delete r[a])}return this},status:function(t){var r=this.rmap,e=this.fired;return e[t]?"fired":r[t]&&r[t].length>0?"waiting":!1},_release:function(t,r){var i=this.map;this.rmap,this.fired;for(var a=0,o=r.length;o>a;++a){var f=r[a],c=i[f],s=c.waiting,l=e.call(s,t);s.splice(l,1),0===s.length&&(n(c.callback,c.thisObj),delete i[f])}}},r}(),o=new a,f={},c={},s=null,l=null,u=function(t,e){1==arguments.length&&(e=t,t=[]),"string"==typeof t&&(t=[t]);var n=r(),a=n.getAttribute("src");i(t,e,a)};u.lsPrefix="test_",u.use=function(t,r){1==arguments.length&&(r=t,t=[]),"string"==typeof t&&(t=[t]),i(t,r)},window.lsCache=u})();